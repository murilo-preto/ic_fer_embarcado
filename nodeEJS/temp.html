<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Central de Expressões Faciais</title>
  </head>
  <body>
    <h1>Interface Central - Expressões Faciais</h1>
    <h2>Gráficos:</h2>
    <h3>Gráfico em barra:</h3>

    <div>
      <canvas id="gBarra" width="300" height="300"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script>
        let data = [1, 10, 1, 4, 1, 2, 1];

        const labels = [
          // Valor de cada coluna
          "Desgosto",
          "Felicidade",
          "Medo",
          "Neutro",
          "Raiva",
          "Surpresa",
          "Tristeza",
        ];

        const bgc = [
          //Background colour
          "rgba(255, 99, 132, 0.2)",
          "rgba(255, 159, 64, 0.2)",
          "rgba(255, 205, 86, 0.2)",
          "rgba(75, 192, 192, 0.2)",
          "rgba(54, 162, 235, 0.2)",
          "rgba(153, 102, 255, 0.2)",
          "rgba(201, 203, 207, 0.2)",
        ];

        const bc = [
          // Border colour
          "rgb(255, 99, 132)",
          "rgb(255, 159, 64)",
          "rgb(255, 205, 86)",
          "rgb(75, 192, 192)",
          "rgb(54, 162, 235)",
          "rgb(153, 102, 255)",
          "rgb(201, 203, 207)",
        ];

        let dataBar = {
          labels: labels,
          datasets: [
            {
              label: "Ocorrência da expressão facial",
              backgroundColor: bgc,
              borderColor: bc,
              borderWidth: 1,
              data: data,
            },
          ],
        };

        const config1 = {
          type: "bar",
          data: dataBar,
          options: { maintainAspectRatio: false },
        };

        const gBarra = new Chart(document.getElementById("gBarra"), config1);

        function generateData() {
          let randomData = [
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
            Math.floor(Math.random() * 10) + 1,
          ];

          return randomData;
        }

        function alterData() {
          gBarra.config.data.datasets[0].data = data;
          gBarra.update();
        }

        setInterval(function lambda() {
          data = generateData();
        }, 1000);
        setInterval(alterData, 1000);
      </script>
    </div>

    <h3>Gráfico em disco:</h3>

    <div>
      <canvas id="gDisco" width="300" height="300"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script>
        const dataPie = {
          labels: labels,
          datasets: [
            {
              backgroundColor: bgc,
              borderColor: bc,
              borderWidth: 0.5,
              data: data,
            },
          ],
        };

        const config2 = {
          type: "pie",
          data: dataPie,
          options: {
            maintainAspectRatio: false,
          },
        };

        const gDisco = new Chart(document.getElementById("gDisco"), config2);

        function alterData() {
          gDisco.config.data.datasets[0].data = data;
          gDisco.update();
        }

        setInterval(alterData, 1000);
      </script>
    </div>
  </body>
</html>
